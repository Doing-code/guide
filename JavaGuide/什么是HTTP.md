# 什么是 HTTP

HTTP 是每个 Web 开发人员都应该了解的协议，因为它为整个 Web 提供动力。了解 HTTP 当然可以帮助您开发更好的应用程序。

在本文中，我将讨论 HTTP 是什么、它是如何产生的、它今天的状况以及我们是如何走到这一步的。

## 什么是 HTTP

什么是HTTP？HTTP 是基于 TCP/IP 的应用层通信协议。它标准化了客户端和服务器之间的通信方式。它定义了如何通过互联网请求和传输内容。通过应用层协议，它只是一个标准化主机（客户端和服务器）通信方式的抽象层。HTTP 本身依赖于 TCP/IP 来获取客户端和服务器之间的请求和响应。默认情况下，使用 TCP 端口 80，但也可以使用其它端口。然而，HTTPS 使用端口443。

## HTTP/0.9

HTTP 的第一个有记录的版本是 1991 年提出的；有一个名为 GET 的方法。如果客户端必须访问服务器上的某个网页，那么它会发出如下所示的简单请求

```http request
GET /index.html
```

服务器的响应如下所示

```text
(response body)

(connection closed)
```

也就是说，服务器将收到请求，回复 HTML 作为响应，一旦内容传输完毕，连接就会关闭。

- 没有请求头

- `GET`是唯一允许的方法

- 响应必须是 HTML

## HTTP/1.0

1996 年，HTTPd下一个版本（HTTP/1.0）得到了发展，比 HTTP/0.9 有了很大的改进。

与仅针对 HTML 响应设计的 HTTP/0.9 不同，HTTP/1.0 现在可以处理其它响应格式，如图形、视频文件、纯文本或任何其它内容类型。**它添加了更多方法（POST 和 HEAD）、更改了请求/响应格式、将 HTTP 请求头添加到请求和响应中、添加了状态码来标识响应、引入了字符集支持、多部分类型、授权、缓存、内容编码等都包括在内**。

以下是 HTTP/1.0 请求和响应的示例：

```text
GET / HTTP/1.0
Host: google.com
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5)
Accept: */*
```

正如您所看到的，除了请求之外，客户端还发送了它的个人信息、所需的响应类型等。而在 HTTP/0.9 中，客户端永远无法发送此类信息，因为没有请求头。

对上述请求的响应示例可能如下所示

```text
HTTP/1.0 200 OK 
Content-Type: text/plain
Content-Length: 137582
Expires: Thu, 05 Dec 1997 16:00:00 GMT
Last-Modified: Wed, 5 August 1996 15:55:28 GMT
Server: Apache 0.84

(response body)
(connection closed)
```

响应的开头是 HTTP/1.0（HTTP 后跟版本号），然后是状态码 200，后跟状态码描述。

在此较新版本中，请求和响应的 headers 仍保留为 ASCII 编码，但响应正文可以是任何类型，如图像、视频、HTML、纯文本或任何其他内容类型。因此，现在服务器可以向客户端发送任何内容类型；

而 HTTP/1.0 的主要缺点之一是每个连接不能有多个请求。也就是说，每当客户端需要从服务器获取某些内容时，它都必须打开一个新的 TCP 连接，并且在满足该单个请求后，连接将被关闭。对于任何下一个请求，都必须建立在新的连接上。

为什么不好？好吧，假设您访问的网页包含 10 个图像、5 个样式表和 5 个 JavaScript 文件，总共有 20 个项目需要在向该网页发出请求时获取。由于服务器在满足请求后立即关闭连接，因此将存在一系列 20 个单独的连接，其中每个项目都将在其单独的连接上一个接一个地提供服务。

### 三次握手

三次握手的简单形式是，所有 TCP 连接都以三次握手开始，其中客户端和服务器在开始共享应用程序数据之前共享一系列数据包。

- SYN：客户端随机选取一个随机数（假设为 x），并将其发送到服务器。

- SYN ACK：服务器通过将 ACK 数据包发送回客户端来确认请求，该数据包由随机数组成，假设 y 由服务器接收和数字 x+1，其中 x 是客户端发送的数字。

- ACK：客户端递增从服务器接收到的数字 y，并发送回带有数字 y+1 的 ACK 数据包。

一旦三次握手完成，客户端和服务器之间的数据共享就可以开始，应该注意的是，客户端可以在发送最后一个 ACK 数据包后立即开发发送应用程序数据，但服务器仍然必须等待收到 ACK 数据包才能满足请求。

![](https://i.imgur.com/ohZthqB.png)

然而，HTTP/1.0 的一些实现试图通过引入一个名为 Connection: keep-alive 的新headers来克服这个问题，该headers皆在告诉服务器"嘿！服务器，不要关闭此链接，我再次需要它"。但它仍然没有得到广泛的支持，问题仍然存在。

除了无连接之外，HTTP 也是一种无状态协议，即服务器不再维护有关客户端的信息，因此每个请求都必须具有服务器自行完成请求所需的信息，与任何旧请求没有任何关联。这使得客户端必须打开大量连接之外，它还必须在线路上发送一些冗余数据，从而导致带宽使用量增加。

## HTTP/1.1















